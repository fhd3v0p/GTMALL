# ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è Traefik

## üîí –°—Ç–∞—Ç—É—Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞–π–¥–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã:
- **–§–∞–π–ª**: `@GTMALL/gtm.baby-ssl-bundle/`
- **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**: `domain.cert.pem` (4.0K)
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á**: `private.key.pem` (4.0K)
- **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á**: `public.key.pem` (4.0K)

### ‚úÖ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
- **–î–æ–º–µ–Ω**: `gtm.baby`
- **Wildcard**: `*.gtm.baby`
- **–ò–∑–¥–∞—Ç–µ–ª—å**: Let's Encrypt
- **–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ**: Nov 3 15:45:58 2025 GMT
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–∞ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
- **–•–µ—à —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞**: —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ö–µ—à–µ–º –∫–ª—é—á–∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ö–ª—é—á –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Traefik

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `traefik.yml`:
```yaml
entryPoints:
  websecure:
    address: ":443"
    http:
      tls:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
        certificates:
          - certFile: "/etc/traefik/ssl/gtm.baby-ssl-bundle/domain.cert.pem"
            keyFile: "/etc/traefik/ssl/gtm.baby-ssl-bundle/private.key.pem"
```

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.yml`:
```yaml
volumes:
  - ./gtm.baby-ssl-bundle:/etc/traefik/ssl/gtm.baby-ssl-bundle:ro
```

## üöÄ –î–µ–ø–ª–æ–π —Å SSL

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è `deploy.sh`:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** (600)
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### üìã –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è:
```bash
cd @GTMALL
chmod +x deploy.sh
./deploy.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –°–∫–æ–ø–∏—Ä—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å SSL

## üåê –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ HTTPS —Å–µ—Ä–≤–∏—Å—ã:
- **API**: `https://api.gtm.baby`
- **Traefik Dashboard**: `https://traefik.gtm.baby`
- **Web App**: `https://gtm.baby` (–ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è)

### ‚úÖ SSL —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç** HTTP ‚Üí HTTPS
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏** (HSTS, CSP, etc.)
- ‚úÖ **Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
- ‚úÖ **Let's Encrypt** –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL

### ‚úÖ –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `check_ssl.sh`:
```bash
cd @GTMALL
chmod +x check_ssl.sh
./check_ssl.sh
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –ù–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–∞ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Traefik
- ‚úÖ –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ docker-compose.yml

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å SSL

```
Internet (HTTPS)
    ‚Üì
Traefik (SSL Termination)
    ‚Üì
‚îú‚îÄ‚îÄ API Server (Flask + Gunicorn) ‚Üí https://api.gtm.baby
‚îú‚îÄ‚îÄ Telegram Bot (python-telegram-bot)
‚îú‚îÄ‚îÄ Redis (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îî‚îÄ‚îÄ Web App (Flutter) ‚Üí https://gtm.baby
    ‚Üì
Supabase (Database + Storage)
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å SSL

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- ‚úÖ **SSL/TLS 1.3** —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **HSTS** (HTTP Strict Transport Security)
- ‚úÖ **CSP** (Content Security Policy)
- ‚úÖ **XSS Protection**
- ‚úÖ **Frame Deny**
- ‚úÖ **Content Type Nosniff**

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ **HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç**
- ‚úÖ **Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
- ‚úÖ **Let's Encrypt** –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏:
```
gtm.baby          A    31.56.46.46
api.gtm.baby      A    31.56.46.46
traefik.gtm.baby  A    31.56.46.46
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π:
```bash
cd @GTMALL
./deploy.sh
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl s_client -connect api.gtm.baby:443 -servername api.gtm.baby

# –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
curl -I http://api.gtm.baby
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ https://api.gtm.baby
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è Traefik**

- ‚úÖ **–í–∞–ª–∏–¥–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** Let's Encrypt
- ‚úÖ **Wildcard –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** —Å SSL
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** üöÄ

**Traefik –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏–∑ `gtm.baby-ssl-bundle/`! üîí** 