# ‚úÖ –û—Ç—á–µ—Ç –æ–± –æ—Ç–∫–∞—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π GTM

## üîÑ –ß—Ç–æ –±—ã–ª–æ –æ—Ç–∫–∞—á–µ–Ω–æ

### 1. Flutter API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **–í–µ—Ä–Ω—É–ª const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ `lib/api_config.dart`
- ‚úÖ **–í–µ—Ä–Ω—É–ª const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ `lib/cdn_config.dart`
- ‚úÖ **–í–µ—Ä–Ω—É–ª const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ `lib/config/api_config.dart`
- ‚úÖ **–í–µ—Ä–Ω—É–ª const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚úÖ **–£–±—Ä–∞–ª —á—Ç–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

### 2. –í–µ—Ä–Ω—É–ª MinIO/CDN
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª MinIO –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ cdn_config.dart
- ‚úÖ **–í–µ—Ä–Ω—É–ª CDN URLs** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MinIO
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º** —á–µ—Ä–µ–∑ API –ø—Ä–æ–∫—Å–∏

### 3. –û–±–Ω–æ–≤–∏–ª .env.example
- ‚úÖ **–£–±—Ä–∞–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Flutter** –∏–∑ .env.example
- ‚úÖ **–í–µ—Ä–Ω—É–ª CDN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ .env.example
- ‚úÖ **–û–±–Ω–æ–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –æ —Ö–∞—Ä–¥–∫–æ–¥–µ

## üìã –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### üîë –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ò–ó–ú–ï–ù–ò–¢–¨!)
```bash
# 1. Supabase Service Role Key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# 2. Traefik Dashboard Password
TRAEFIK_DASHBOARD_AUTH=admin:your_secure_password_here
```

### ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```bash
# Supabase Configuration
SUPABASE_URL=https://rxmtovqxjsvogyywyrha.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Telegram Bot
TELEGRAM_BOT_TOKEN=7533650686:AAEU4_nJZHGfzOv9XL4m_fDVt0q3dMDPQX8

# CDN Configuration
CDN_MINIO_ENDPOINT=https://gtm.baby/api/minio/download/gtm-assets
CDN_BUCKET_NAME=gtm-assets
CDN_ACCESS_KEY=gtmadmin
CDN_SECRET_KEY=gtm123456
```

## üöÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞

```
Internet (HTTPS)
    ‚Üì
Traefik (SSL/Proxy)
    ‚Üì
‚îú‚îÄ‚îÄ API Server (Flask) ‚Üí https://api.gtm.baby
‚îú‚îÄ‚îÄ Telegram Bot (python-telegram-bot)
‚îú‚îÄ‚îÄ Flutter Web App (Nginx) ‚Üí https://gtm.baby
‚îú‚îÄ‚îÄ Redis (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îî‚îÄ‚îÄ Supabase (Database) + MinIO (Storage)
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

- **API**: `https://api.gtm.baby`
  - Health: `https://api.gtm.baby/api/health`
  - Subscription: `https://api.gtm.baby/api/check_subscription`

- **Web App**: `https://gtm.baby`
  - Health: `https://gtm.baby/health`
  - Status: `https://gtm.baby/status`

- **Traefik Dashboard**: `https://traefik.gtm.baby`
  - –õ–æ–≥–∏–Ω: `admin`
  - –ü–∞—Ä–æ–ª—å: –∏–∑ `TRAEFIK_DASHBOARD_AUTH`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ä—ã:
- ‚úÖ **SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ Traefik
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏** –≤ nginx
- ‚úÖ **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è API
- ‚úÖ **Rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫
- ‚úÖ **–ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** –¥–ª—è dashboard

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é:
- ‚úÖ **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** API
- ‚úÖ **Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **Supabase** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **MinIO** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ **Traefik** –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–∫–∞—Ç–∞

‚úÖ **–í–µ—Ä–Ω—É–ª const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª MinIO/CDN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
‚úÖ **–£–±—Ä–∞–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ Flutter**
‚úÖ **Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π**

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ .env:
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `TRAEFIK_DASHBOARD_AUTH`

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏**:
   ```
   gtm.baby          A    31.56.46.46
   api.gtm.baby      A    31.56.46.46
   traefik.gtm.baby  A    31.56.46.46
   ```

3. **–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –≤ `traefik/ssl/gtm.baby-ssl-bundle/`

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π**:
   ```bash
   cd @GTMALL
   ./deploy.sh
   ```

## üéâ –û—Ç–∫–∞—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!

**Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ—Ä–Ω—É–ª–æ—Å—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é —Å const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏! üöÄ**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫–∞–∫ –±—ã–ª–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ. 