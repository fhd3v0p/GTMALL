{% extends 'admin_panel/base.html' %}

{% block title %}Telegram-—Å—Å—ã–ª–∫–∏ - GTM Admin Panel{% endblock %}

{% block content %}
<h2>üì± –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Telegram-—Å—Å—ã–ª–∫–∞–º–∏</h2>

<div id="telegram-links-container" class="loading">
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ Telegram-—Å—Å—ã–ª–æ–∫...</p>
</div>

<script>
function loadTelegramLinks() {
    fetch('/api/telegram-links/')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayTelegramLinks(data.data);
            } else {
                document.getElementById('telegram-links-container').innerHTML = 
                    '<p class="status-offline">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Telegram-—Å—Å—ã–ª–æ–∫</p>';
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Telegram-—Å—Å—ã–ª–æ–∫:', error);
            document.getElementById('telegram-links-container').innerHTML = 
                '<p class="status-offline">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Telegram-—Å—Å—ã–ª–æ–∫</p>';
        });
}

function displayTelegramLinks(links) {
    const container = document.getElementById('telegram-links-container');
    container.innerHTML = '';
    
    links.forEach(link => {
        const linkElement = document.createElement('div');
        linkElement.className = 'telegram-link';
        linkElement.innerHTML = `
            <h3>@${link.name}</h3>
            <p><strong>URL:</strong> <a href="${link.url}" target="_blank">${link.url}</a></p>
            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${link.description}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status-online">‚úÖ –ê–∫—Ç–∏–≤–Ω–∞</span></p>
        `;
        container.appendChild(linkElement);
    });
}

document.addEventListener('DOMContentLoaded', loadTelegramLinks);
</script>
{% endblock %} 