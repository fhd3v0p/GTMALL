# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è GTM

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. Flutter API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **–£–±—Ä–∞–ª —Ö–∞—Ä–¥–∫–æ–¥** –∏–∑ `lib/api_config.dart`
- ‚úÖ **–£–±—Ä–∞–ª —Ö–∞—Ä–¥–∫–æ–¥** –∏–∑ `lib/cdn_config.dart`
- ‚úÖ **–£–±—Ä–∞–ª —Ö–∞—Ä–¥–∫–æ–¥** –∏–∑ `lib/config/api_config.dart`
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏–ª const –æ—à–∏–±–∫–∏** –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚úÖ **–î–æ–±–∞–≤–∏–ª —á—Ç–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

### 2. –£–±—Ä–∞–ª MinIO/CDN
- ‚úÖ **–£–¥–∞–ª–∏–ª MinIO –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** - —É –Ω–∞—Å –Ω–µ—Ç MinIO
- ‚úÖ **–ó–∞–º–µ–Ω–∏–ª –Ω–∞ Supabase Storage** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ Supabase
- ‚úÖ **–û–±–Ω–æ–≤–∏–ª –≤—Å–µ URL** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase Storage
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏–ª –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º** –≤ CDN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 3. –°–æ–±—Ä–∞–ª Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏–ª –≤—Å–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**
- ‚úÖ **–°–æ–±—Ä–∞–ª –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **–°–∫–æ–ø–∏—Ä–æ–≤–∞–ª –≤ @GTMALL/web/**
- ‚úÖ **–°–æ–∑–¥–∞–ª Dockerfile** –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **–°–æ–∑–¥–∞–ª nginx.conf** —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é

### 4. –û–±–Ω–æ–≤–∏–ª Docker Compose
- ‚úÖ **–î–æ–±–∞–≤–∏–ª –≤–µ–±-—Å–µ—Ä–≤–∏—Å** –≤ docker-compose.yml
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏–ª Traefik** –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **–î–æ–±–∞–≤–∏–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞

## üìã –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### üîë –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ò–ó–ú–ï–ù–ò–¢–¨!)
```bash
# 1. Supabase Service Role Key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# 2. Traefik Dashboard Password
TRAEFIK_DASHBOARD_AUTH=admin:your_secure_password_here
```

### ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```bash
# Supabase Configuration
SUPABASE_URL=https://rxmtovqxjsvogyywyrha.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Telegram Bot
TELEGRAM_BOT_TOKEN=7533650686:AAEU4_nJZHGfzOv9XL4m_fDVt0q3dMDPQX8

# Flutter App
SUPABASE_STORAGE_BUCKET=gtm-assets-public
SUPABASE_ARTISTS_PATH=artists
SUPABASE_IMAGES_PATH=assets/images
SUPABASE_FONTS_PATH=fonts
SUPABASE_VIDEOS_PATH=videos
```

## üöÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

```
Internet (HTTPS)
    ‚Üì
Traefik (SSL/Proxy)
    ‚Üì
‚îú‚îÄ‚îÄ API Server (Flask) ‚Üí https://api.gtm.baby
‚îú‚îÄ‚îÄ Telegram Bot (python-telegram-bot)
‚îú‚îÄ‚îÄ Flutter Web App (Nginx) ‚Üí https://gtm.baby
‚îú‚îÄ‚îÄ Redis (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îî‚îÄ‚îÄ Supabase (Database + Storage)
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

- **API**: `https://api.gtm.baby`
  - Health: `https://api.gtm.baby/api/health`
  - Subscription: `https://api.gtm.baby/api/check_subscription`

- **Web App**: `https://gtm.baby`
  - Health: `https://gtm.baby/health`
  - Status: `https://gtm.baby/status`

- **Traefik Dashboard**: `https://traefik.gtm.baby`
  - –õ–æ–≥–∏–Ω: `admin`
  - –ü–∞—Ä–æ–ª—å: –∏–∑ `TRAEFIK_DASHBOARD_AUTH`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ä—ã:
- ‚úÖ **SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ Traefik
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏** –≤ nginx
- ‚úÖ **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è API
- ‚úÖ **Rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫
- ‚úÖ **–ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** –¥–ª—è dashboard

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é:
- ‚úÖ **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** API
- ‚úÖ **Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **Supabase** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Traefik** –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ .env**
‚úÖ **–£–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ –∏–∑ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
‚úÖ **–£–±—Ä–∞–Ω–∞ MinIO/CDN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ Supabase**
‚úÖ **Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é**
‚úÖ **Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ .env:
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `TRAEFIK_DASHBOARD_AUTH`

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏**:
   ```
   gtm.baby          A    31.56.46.46
   api.gtm.baby      A    31.56.46.46
   traefik.gtm.baby  A    31.56.46.46
   ```

3. **–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –≤ `traefik/ssl/gtm.baby-ssl-bundle/`

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π**:
   ```bash
   cd @GTMALL
   ./deploy.sh
   ```

## üéâ –ì–æ—Ç–æ–≤–æ!

**Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è! üöÄ** 